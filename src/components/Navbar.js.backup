import React from 'react';
import { AppBar, Toolbar, Typography, IconButton, Badge } from '@mui/material';
import { ShoppingCart, Person, ArrowBack } from '@mui/icons-material';
import { useNavigate } from 'react-router-dom';
import { useCart } from '../context/CartContext.js';

function Navbar({ showBackButton = false }) {
  const navigate = useNavigate();
  const { totalItems } = useCart();

  const handleViewCart = () => {
    navigate('/cart');
  };

  const handleGoBack = () => {
    navigate(-1);
  };

  const handleGoHome = () => {
    navigate('/');
  };

  return (
    <AppBar 
      position="static" 
      className="bg-background-white shadow-sm border-b border-border-gray"
      sx={{ 
        backgroundColor: '#ffffff',
        boxShadow: 'none',
        borderBottom: '1px solid #d2d2d7'
      }}
    >
      <Toolbar className="py-3">
        {showBackButton && (
          <IconButton 
            onClick={handleGoBack}
            className="mr-2"
            sx={{ 
              color: '#000000',
              '&:hover': {
                backgroundColor: '#f5f5f7'
              }
            }}
          >
            <ArrowBack />
          </IconButton>
        )}
        <Typography 
          variant="h6" 
          className="flex-grow font-medium cursor-pointer text-primary-black tracking-[0.25px]"
          onClick={handleGoHome}
          sx={{ 
            color: '#000000',
            fontWeight: 500,
            '&:hover': {
              color: '#1d1d1f'
            }
          }}
        >
          MMWAFRIKA
        </Typography>
        <IconButton 
          sx={{ 
            color: '#000000',
            '&:hover': {
              backgroundColor: '#f5f5f7'
            }
          }}
        >
          <Person />
        </IconButton>
        <IconButton 
          onClick={handleViewCart}
          sx={{ 
            color: '#000000',
            '&:hover': {
              backgroundColor: '#f5f5f7'
            }
          }}
        >
          <Badge badgeContent={totalItems} color="error">
            <ShoppingCart />
          </Badge>
        </IconButton>
      </Toolbar>
    </AppBar>
  );
}

export default Navbar;